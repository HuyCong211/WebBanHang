@model IEnumerable<DoAnChuyenNganh.Areas.Admin.Controllers.UserViewModel>
@{
    ViewBag.Title = "Quản lý tài khoản";
    Layout = "~/Areas/Admin/Views/Shared/_LayoutAdmin.cshtml";
}


@section naviheader
{
    <!-- Left navbar links -->
    <ul class="navbar-nav">
        <li class="nav-item">
            <a class="nav-link" data-widget="pushmenu" href="#" role="button"><i class="fas fa-bars"></i></a>
        </li>
        <li class="nav-item d-none d-sm-inline-block">
            <a href="/admin/home" class="nav-link">Trang chủ</a>
        </li>
        <li class="nav-item d-none d-sm-inline-block">
            <a href="/admin/Users" class="nav-link">Quản lý tài khoản</a>
        </li>
    </ul>
}
<section class="content">
    <div class="container-fluid">
        <h2 class="mb-3">Danh sách tài khoản</h2>
        <a href="@Url.Action("Create", "Users")" class="btn btn-success mb-3">
            <i class="fas fa-plus"></i> Thêm tài khoản
        </a>

        @if (TempData["Message"] != null)
        {
            <div id="autoHideAlert" class="alert alert-success">@TempData["Message"]</div>

            <script>
                // Sau 3 giây sẽ ẩn đi
                setTimeout(function () {
                    var alert = document.getElementById("autoHideAlert");
                    if (alert) {
                        alert.style.transition = "opacity 0.5s ease";
                        alert.style.opacity = "0";
                        setTimeout(() => alert.remove(), 500); // Xoá khỏi DOM
                    }
                }, 3000);
            </script>
        }

        <table class="table table-bordered table-hover">
            <thead class="thead-dark">
                <tr>
                    <th>Email</th>
                    <th>Họ tên</th>
                    <th>Số điện thoại</th>
                    <th>Quyền</th>
                    <th class="text-center" style="width:120px">Thao tác</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model)
                {
                    <tr>
                        <td>@item.Email</td>
                        <td>@item.Fullname</td>
                        <td>@item.Phone</td>
                        <td>@item.Roles</td>
                        <td class="text-center">
                            <a href="@Url.Action("Edit", "Users", new { id = item.Id })" class="btn btn-sm btn-primary">
                                <i class="fas fa-edit"></i> Sửa
                            </a>
                            @using (Html.BeginForm("Delete", "Users", new { id = item.Id }, FormMethod.Post))
                            {
                                <button type="submit" class="btn btn-sm btn-danger" onclick="return confirm('Bạn có chắc muốn xoá tài khoản này không?');">
                                    <i class="fas fa-trash"></i> Xoá
                                </button>
                            }
                        </td>

                    </tr>
                }
            </tbody>
        </table>
    </div>
</section>

